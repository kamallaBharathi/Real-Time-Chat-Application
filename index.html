<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Real-Time Chat ‚Äî Demo Output</title>
  <style>
    :root{
      --bg:#8c693f;
      --card:#fff;
      --accent:#e85a27;
      --muted:#dfe6ee;
      --me:#d1f7e3;
    }
    *{box-sizing:border-box;font-family:Inter, system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial;}
    body{margin:0;padding:20px;background:var(--bg);display:flex;align-items:center;justify-content:center;min-height:100vh}
    .frame{
      width:100%;
      max-width:880px;
      background:linear-gradient(180deg, #fff 0%, #fff 60%, #fff0 100%);
      border-radius:14px;
      padding:18px;
      box-shadow:0 10px 30px rgba(0,0,0,0.08);
      display:grid;grid-template-columns:320px 1fr;gap:18px;
    }
    .sidebar{
      background:var(--card);
      border-radius:10px;
      padding:14px;
      display:flex;flex-direction:column;height:520px;
    }
    .brand{display:flex;align-items:center;gap:10px;margin-bottom:14px}
    .logo{
      width:44px;height:44px;border-radius:8px;background:var(--accent);display:flex;align-items:center;justify-content:center;color:#fff;font-weight:700;
    }
    .brand h3{margin:0;font-size:16px}
    .users{flex:1;overflow:auto;padding-right:6px}
    .user{display:flex;align-items:center;gap:10px;padding:8px;border-radius:8px;cursor:pointer}
    .user:hover{background:#80787d}
    .avatar{width:40px;height:40px;border-radius:8px;background:var(--muted);display:flex;align-items:center;justify-content:center;color:#1f2937
    }
    .chat{
      background:var(--card);
      border-radius:10px;
      padding:14px;
      height:520px;
      display:flex;flex-direction:column;
    }
    .chat-header{display:flex;align-items:center;justify-content:space-between;padding-bottom:8px;border-bottom:1px solid #f0f0f0}
    .chat-header h4{margin:0}
    .messages{flex:1;overflow:auto;padding:14px;display:flex;flex-direction:column;gap:10px}
    .msg{max-width:75%;padding:10px 12px;border-radius:12px;background:var(--muted);line-height:1.3}
    .msg.me{align-self:flex-end;background:var(--me)}
    .meta{font-size:11px;color:#6b7280;margin-bottom:6px}

    .composer{display:flex;gap:10px;padding-top:12px;border-top:1px solid #f0f0f0}
    .composer input{flex:1;padding:10px;border-radius:10px;border:1px solid #e5e7eb}
    .composer button{padding:10px 14px;border-radius:10px;border:0;background:var(--accent);color:#fff;cursor:pointer
    }
    @media (max-width:720px){
      .frame{grid-template-columns:1fr; padding:12px}
      .sidebar{display:none}
    }
  </style>
</head>
<body>

  <div class="frame" role="main">
    <aside class="sidebar" aria-label="Contacts">
      <div class="brand">
        <div class="logo">RTCA</div>
        <div>
          <h3>RealTime Chat Application</h3>
          <div style="font-size:12px;color:#7e8ba5">Real-Time Chat</div>
        </div>
      </div>

      <div class="users" id="userList">
        <div class="user" data-name="Chanti">
          <div class="avatar">C</div>
          <div>
            <div style="font-weight:600">Chanti</div>
            <div style="font-size:12px;color:#6b7280">Online</div>
          </div>
        </div>

        <div class="user" data-name="Bharathi">
          <div class="avatar">B</div>
          <div>
            <div style="font-weight:600">Bharathi</div>
            <div style="font-size:12px;color:#87898d">Last seen 2m</div>
          </div>
        </div>

        <div class="user" data-name="Team Demo">
          <div class="avatar">T</div>
          <div>
            <div style="font-weight:600">Team Demo</div>
            <div style="font-size:12px;color:#6b7280">Group chat</div>
          </div>
        </div>
      </div>

      <div style="font-size:12px;color:#6b7280;padding-top:10px">Deliverable: Responsive chat interface with message history</div>
    </aside>

    <section class="chat" aria-label="Chat window">
      <div class="chat-header">
        <div>
          <h4 id="chatTitle">Team Demo</h4>
          <div style="font-size:12px;color:#6b7280" id="subTitle">You and 2 others</div>
        </div>
        <div style="font-size:12px;color:#6b7280">ws://localhost:8080</div>
      </div>

      <div class="messages" id="messages">
        <div>
          <div class="meta">Chanti ‚Ä¢ 10:01 AM</div>
          <div class="msg">Hey team, starting the demo now ‚Äî can everyone confirm connection?</div>
        </div>

        <div>
          <div class="meta">Bharathi ‚Ä¢ 10:02 AM</div>
          <div class="msg">Connected here. UI looks great on mobile üëç</div>
        </div>

        <div>
          <div class="meta">You ‚Ä¢ 10:03 AM</div>
          <div class="msg me">All set ‚Äî messages are relayed through the WebSocket server.</div>
        </div>
      </div>

      <form id="composer" class="composer" onsubmit="return false;">
        <input id="inputMsg" type="text" placeholder="Type message and press Send (or Enter)" autocomplete="off" />
        <button id="sendBtn" type="button">Send</button>
      </form>
    </section>
  </div>

  <script>
    const url = "ws://localhost:8080";
    let socket = null;

    const messagesEl = document.getElementById('messages');
    const input = document.getElementById('inputMsg');
    const sendBtn = document.getElementById('sendBtn');

    function addMessage(text, who = "them", timeLabel = null) {
      const wrapper = document.createElement('div');
      const meta = document.createElement('div');
      meta.className = 'meta';
      meta.textContent = (who === 'me' ? 'You' : who) + (timeLabel ? ' ‚Ä¢ ' + timeLabel : '');
      const msg = document.createElement('div');
      msg.className = 'msg' + (who === 'me' ? ' me' : '');
      msg.textContent = text;
      wrapper.appendChild(meta);
      wrapper.appendChild(msg);
      messagesEl.appendChild(wrapper);
      messagesEl.scrollTop = messagesEl.scrollHeight;
    }

    function connect() {
      try {
        socket = new WebSocket(url);
      } catch (e) {
        console.error('WebSocket creation error', e);
        addMessage('Unable to create WebSocket. Check server.', 'system');
        return;
      }

      socket.onopen = () => {
        addMessage('Connected to server', 'system');
      };

      socket.onmessage = (evt) => {
        const txt = evt.data;
        addMessage(txt, 'them');
      };

      socket.onclose = () => {
        addMessage('Disconnected from server', 'system');
        setTimeout(connect, 3000);
      };

      socket.onerror = (err) => {
        console.error('Socket error', err);
      };
    }
    sendBtn.addEventListener('click', () => {
      const v = input.value.trim();
      if (!v) return;
      if (socket && socket.readyState === WebSocket.OPEN) {
        socket.send(v);
        addMessage(v, 'me');
        input.value = '';
      } else {
        addMessage('Not connected. Message not sent.', 'system');
      }
    });

    input.addEventListener('keydown', (e) => {
      if (e.key === 'Enter') {
        sendBtn.click();
      }
    });
    connect();
  </script>
</body>
</html>
